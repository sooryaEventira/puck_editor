import{j as e}from"./puck-vendor-BeE6vXWX.js";import{r as t,R as s}from"./react-vendor-BdxBrZfF.js";import{j as a,P as l,k as n,a3 as r,e as i,l as o,U as d,f as c,t as m,X as x,A as u,a as h}from"./icons-vendor-B3tUBqWS.js";import{M as p}from"./index-BJwQuQYO.js";import{B as f}from"./Button-DNvYpR_w.js";import{U as g}from"./UploadModal-DMXX1wjT.js";const b=({initialDate:s=new Date,onDateChange:r,onDateRangeChange:i,className:o=""})=>{const d=t.useCallback(e=>{const t=new Date(e);return t.setHours(0,0,0,0),t},[]),[c,m]=t.useState(()=>d(s)),[x,u]=t.useState(!1),[h,p]=t.useState(null),[g,b]=t.useState(null),[j,w]=t.useState(null),[y,v]=t.useState(null),[N,M]=t.useState(new Date),S=t.useRef(null),k=e=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],D=t.useMemo(()=>(e=>{const t=d(e),s=t.getDay(),a=t.getDate()-s+(0===s?-6:1);return t.setDate(a),t.setHours(0,0,0,0),Array.from({length:7},(e,s)=>{const a=new Date(t);return a.setDate(t.getDate()+s),a.setHours(0,0,0,0),a})})(c),[c]),C=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],F=t.useMemo(()=>D,[D]),A=e=>{const t=new Date(c);t.setDate(c.getDate()+("next"===e?7:-7));const s=d(t);m(s),null==r||r(s)},T=e=>h&&L(e,h),E=e=>g&&L(e,g),z=e=>{const t=new Date(e.getFullYear(),e.getMonth(),1),s=new Date(e.getFullYear(),e.getMonth()+1,0),a=t.getDay(),l=s.getDate(),n=[],r=0===a?6:a-1;for(let i=0;i<r;i+=1)n.push(null);for(let i=1;i<=l;i+=1)n.push(new Date(e.getFullYear(),e.getMonth(),i));for(;n.length%7!=0;)n.push(null);return n},L=(e,t)=>!(!e||!t)&&(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()),I=(e,t,s)=>{if(!e||!t||!s)return!1;const a=e.getTime(),l=t.getTime(),n=s.getTime();return a>=l&&a<=n},P=e=>{!j||j&&y?(w(e),v(null)):j&&!y&&(e<j?(v(j),w(e)):v(e))},H=t.useCallback(e=>{S.current&&!S.current.contains(e.target)&&u(!1)},[]);t.useEffect(()=>{if(x)return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[x,H]),t.useEffect(()=>{M(new Date(c.getFullYear(),c.getMonth(),1))},[c]),t.useEffect(()=>{m(d(s))},[s]);const $=e=>{if(!e)return"";return`${new Intl.DateTimeFormat("en-US",{month:"short"}).format(e)} ${e.getDate().toString().padStart(2,"0")}, ${e.getFullYear()}`},B=t.useMemo(()=>z(N),[N]),Y=t.useMemo(()=>new Date(N.getFullYear(),N.getMonth()+1,1),[N]),U=t.useMemo(()=>z(Y),[Y]),O=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs("div",{className:`shedulebar relative flex items-center ${h&&g?"justify-between":"justify-center"} gap-2 mt-2 w-full${o}`,children:[e.jsx("button",{type:"button",onClick:()=>A("prev"),className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full border-none bg-slate-100 text-slate-600 shadow-sm transition-all duration-200 hover:bg-slate-200 hover:-translate-y-0.5 sm:h-12 sm:w-12","aria-label":"Previous week",children:e.jsx(a,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsxs("div",{className:"relative flex justify-center",children:[e.jsx("div",{className:"flex gap-1 overflow-x-auto pb-2 sm:gap-3 sm:pb-0 scrollbar-hide h-[70px] sm:overflow-visible",children:F.map((t,s)=>{const a=(e=>h&&g?I(e,h,g):e.toDateString()===c.toDateString())(t),l=T(t),n=E(t),i=(e=>!(!h||!g)&&I(e,h,g)&&!T(e)&&!E(e))(t);let o="bg-[#FAFAFA] text-[#414651] outline outline-1 outline-[#D5D7DA] hover:bg-slate-50 hover:-translate-y-0.5",x="font-bold text-[#414651]",u="font-medium text-[#414651]";return h&&g?l||n?(o="bg-primary text-white shadow-md shadow-primary/30 outline-none",x="font-bold text-white",u="font-medium text-white"):i&&(o="bg-primary/20 text-primary shadow-md outline outline-1 outline-primary/30 hover:bg-primary/30 hover:-translate-y-0.5",x="font-bold text-primary",u="font-medium text-primary"):a&&(o="bg-primary text-white shadow-lg shadow-primary/30 outline-none",x="font-bold text-white",u="font-medium text-white"),e.jsx("div",{className:"relative shrink-0",children:e.jsxs("button",{type:"button",onClick:()=>(e=>{const t=d(e);m(t),null==r||r(t)})(t),className:`inline-flex flex-col items-center justify-center rounded-[10px] px-1 py-2 text-[10px] shadow-md shadow-primary/30 transition-all duration-200 sm:px-[20px] sm:py-2.5 sm:text-sm min-w-[80px] sm:min-w-[100px] w-[140px] md:w-[140px] md:min-w-[140px] md:max-w-[140px] md:px-[30px] md:py-3 ${o}`,children:[e.jsx("div",{className:`leading-4 sm:leading-5 ${x}`,style:{fontFamily:"Inter"},children:h&&g?k(t):C[s]}),e.jsx("div",{className:`leading-4 sm:leading-5 ${u}`,style:{fontFamily:"Inter"},children:t.getDate()})]})},`${t.toISOString()}-${s}`)})}),F.length>0&&e.jsxs("div",{className:"group absolute right-0 top-0 z-10",children:[e.jsx("button",{type:"button",onClick:()=>{w(h),v(g),u(!0)},className:"flex h-5 w-5 -translate-y-4 translate-x-4 items-center justify-center rounded-full border-none bg-transparent text-slate-400 transition-all duration-200 hover:text-slate-600 sm:h-6 sm:w-6 sm:-translate-y-4 sm:translate-x-3","aria-label":"Edit date range",children:e.jsx(l,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("span",{className:"pointer-events-none absolute left-6 top-5 -translate-y-8 translate-x-4 whitespace-nowrap rounded-md bg-primary/100 px-2 py-0.5 text-xs text-white opacity-0 shadow-lg transition-opacity duration-200 group-hover:opacity-100 sm:-translate-y-10 sm:translate-x-3",children:"Edit"})]})]}),e.jsx("button",{type:"button",onClick:()=>A("next"),className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full border-none bg-slate-100 text-slate-600 shadow-sm transition-all duration-200 hover:bg-slate-200 hover:-translate-y-0.5 sm:h-12 sm:w-12","aria-label":"Next week",children:e.jsx(n,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),x&&e.jsxs("div",{ref:S,className:"absolute left-0 top-full z-[9999] mt-4 w-[calc(100vw-2rem)] max-w-xl rounded-xl border border-slate-200 bg-white shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",style:{padding:"20px 24px"},children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:()=>M(new Date(N.getFullYear(),N.getMonth()-1,1)),className:"flex h-8 w-8 items-center justify-center rounded-md p-1.5","aria-label":"Previous month",children:e.jsx(a,{className:"h-5 w-5 text-[#A4A7AE]"})}),e.jsxs("div",{className:"text-center text-sm font-semibold text-[#414651]",style:{fontFamily:"Inter",lineHeight:"20px"},children:[O[N.getMonth()]," ",N.getFullYear()]}),e.jsx("div",{className:"h-8 w-8"})," "]}),e.jsx("div",{className:"grid grid-cols-7",children:["Mo","Tu","We","Th","Fr","Sa","Su"].map(t=>e.jsx("div",{className:"h-10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-[#414651]",style:{fontFamily:"Inter",lineHeight:"20px"},children:t})},t))}),e.jsx("div",{className:"grid grid-cols-7",style:{gap:0},children:B.map((t,s)=>{if(!t)return e.jsx("div",{className:"h-10 w-10",style:{margin:0}},`empty-1-${s}`);const a=t.getMonth()===N.getMonth(),l=j&&L(t,j),n=y&&L(t,y),r=j&&y&&I(t,j,y)&&!l&&!n,i=L(t,new Date),o=!a,d=r||n&&j&&t>j,c=r||l&&y&&t<y;return e.jsxs("div",{className:"relative",style:{width:"40px",height:"40px",margin:0},children:[d&&e.jsx("div",{className:"absolute left-0 top-0 h-10 w-5 bg-[#6938EF]"}),c&&e.jsx("div",{className:"absolute right-0 top-0 h-10 w-5 bg-[#6938EF]"}),e.jsxs("button",{type:"button",onClick:()=>!o&&P(t),disabled:o,className:"relative rounded-full flex items-center justify-center text-sm transition "+(l||n||r?"bg-[#6938EF] text-white font-medium":o?"text-[#717680] font-normal cursor-not-allowed":"text-[#414651] font-normal hover:bg-[#FAFAFA]"),style:{fontFamily:"Inter",lineHeight:"20px",width:"40px",height:"40px",margin:0,padding:0},children:[t.getDate(),i&&!l&&!n&&e.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 bg-[#6938EF] rounded-full"})]})]},t.toISOString())})})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:()=>M(new Date(Y.getFullYear(),Y.getMonth()-1,1)),className:"flex h-8 w-8 items-center justify-center rounded-md p-1.5","aria-label":"Previous month",children:e.jsx(a,{className:"h-5 w-5 text-[#A4A7AE]"})}),e.jsxs("div",{className:"text-center text-sm font-semibold text-[#414651]",style:{fontFamily:"Inter",lineHeight:"20px"},children:[O[Y.getMonth()]," ",Y.getFullYear()]}),e.jsx("button",{type:"button",onClick:()=>M(new Date(Y.getFullYear(),Y.getMonth()+1,1)),className:"flex h-8 w-8 items-center justify-center rounded-md p-1.5","aria-label":"Next month",children:e.jsx(n,{className:"h-5 w-5 text-[#A4A7AE]"})})]}),e.jsx("div",{className:"grid grid-cols-7",children:["Mo","Tu","We","Th","Fr","Sa","Su"].map(t=>e.jsx("div",{className:"h-10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-[#414651]",style:{fontFamily:"Inter",lineHeight:"20px"},children:t})},t))}),e.jsx("div",{className:"grid grid-cols-7",style:{gap:0},children:U.map((t,s)=>{if(!t)return e.jsx("div",{className:"h-10 w-10",style:{margin:0}},`empty-2-${s}`);const a=t.getMonth()===Y.getMonth(),l=j&&L(t,j),n=y&&L(t,y),r=j&&y&&I(t,j,y)&&!l&&!n,i=L(t,new Date),o=!a,d=r||n&&j&&t>j,c=r||l&&y&&t<y;return e.jsxs("div",{className:"relative",style:{width:"40px",height:"40px",margin:0},children:[d&&e.jsx("div",{className:"absolute left-0 top-0 h-10 w-5 bg-[#6938EF]"}),c&&e.jsx("div",{className:"absolute right-0 top-0 h-10 w-5 bg-[#6938EF]"}),e.jsxs("button",{type:"button",onClick:()=>!o&&P(t),disabled:o,className:"relative rounded-full flex items-center justify-center text-sm transition "+(l||n||r?"bg-[#6938EF] text-white font-medium":o?"text-[#717680] font-normal cursor-not-allowed":"text-[#414651] font-normal hover:bg-[#FAFAFA]"),style:{fontFamily:"Inter",lineHeight:"20px",width:"40px",height:"40px",margin:0,padding:0},children:[t.getDate(),i&&!l&&!n&&e.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 bg-[#6938EF] rounded-full"})]})]},t.toISOString())})})]})]}),e.jsxs("div",{className:"border-t border-[#E9EAEB] p-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[e.jsx("div",{className:"w-[136px]",children:e.jsx("input",{type:"text",readOnly:!0,value:$(j),className:"w-full px-3 py-2 bg-white border border-[#D5D7DA] rounded-lg text-base text-[#181D27] shadow-sm focus:outline-none",style:{fontFamily:"Inter",lineHeight:"24px",fontWeight:"400"},placeholder:"Start date"})}),e.jsx("span",{className:"text-[#A4A7AE] text-base",style:{fontFamily:"Inter",lineHeight:"24px"},children:"â€“"}),e.jsx("div",{className:"w-[136px]",children:e.jsx("input",{type:"text",readOnly:!0,value:$(y),className:"w-full px-3 py-2 bg-white border border-[#D5D7DA] rounded-lg text-base text-[#181D27] shadow-sm focus:outline-none",style:{fontFamily:"Inter",lineHeight:"24px",fontWeight:"400"},placeholder:"End date"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{type:"button",variant:"secondary",size:"md",onClick:()=>{w(h),v(g),u(!1)},style:{fontFamily:"Inter",lineHeight:"20px"},children:"Cancel"}),e.jsx(f,{type:"button",variant:"primary",size:"md",onClick:()=>{j&&y&&(p(j),b(y),null==i||i(j,y),m(j),null==r||r(j)),u(!1)},disabled:!j||!y,style:{fontFamily:"Inter",lineHeight:"20px"},children:"Apply"})]})]})]})]})},j=({session:t,parallelSessions:a,isExpanded:l,onToggleExpand:n,getNestedParallelSessions:x,isSessionExpanded:u,onToggleSessionExpand:h,onAddParallelSession:p,formatTime:f,formatTimeRange:g,getLocationLabel:b,getSessionTypeLabel:j,isTimeValid:w})=>{var y;const v=a.length>0,N=!v&&p,M=v,S=s.useCallback(e=>(null==x?void 0:x(e))??[],[x]),k=s.useCallback((t,s)=>{const a=S(t.id);if(0===a.length)return null;return!u||u(t.id)||1===s?e.jsx("div",{className:"mt-2 space-y-2",children:a.map(a=>{var l;const n=S(a.id).length>0,x=!u||u(a.id);return w(a,t),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-slate-300",style:{left:16+20*(s-1)+"px"}}),e.jsx("div",{className:"border border-slate-200 rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow",style:{marginLeft:24+20*(s-1)+"px"},children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-primary focus:ring-primary/40"}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"cursor-move text-slate-400 hover:text-slate-600",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M7 2a2 2 0 1 1 0 4 2 2 0 0 1 0-4zM7 8a2 2 0 1 1 0 4 2 2 0 0 1 0-4zM7 14a2 2 0 1 1 0 4 2 2 0 0 1 0-4zM13 2a2 2 0 1 1 0 4 2 2 0 0 1 0-4zM13 8a2 2 0 1 1 0 4 2 2 0 0 1 0-4zM13 14a2 2 0 1 1 0 4 2 2 0 0 1 0-4z"})})}),e.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:a.title})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[n&&h&&e.jsx("button",{type:"button",onClick:()=>h(a.id),className:"p-1 text-slate-400 hover:text-slate-600 rounded","aria-label":x?"Collapse":"Expand",children:x?e.jsx(r,{className:"h-3.5 w-3.5"}):e.jsx(i,{className:"h-3.5 w-3.5"})}),e.jsx("button",{type:"button",className:"p-1 text-slate-400 hover:text-slate-600 rounded","aria-label":"More options",children:e.jsx("svg",{className:"h-3.5 w-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[!a.parentId&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:[e.jsx(o,{className:"h-3 w-3"}),g(a)]}),a.location&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:[e.jsxs("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),b(a.location)]}),a.sessionType&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:["keynote"===a.sessionType?e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}):e.jsx(d,{className:"h-3 w-3"}),j(a.sessionType)]})]}),p&&e.jsx("button",{type:"button",onClick:()=>null==p?void 0:p(t.id),className:"p-1 text-slate-400 hover:text-primary rounded border border-slate-300 flex-shrink-0 transition-colors","aria-label":"Add parallel session",children:e.jsx(c,{className:"h-3.5 w-3.5"})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[e.jsx(m,{className:"h-3 w-3"}),(null==(l=a.attachments)?void 0:l.length)||0]})})]})}),n&&x&&k(a,s+1)]},a.id)})}):null},[S,u,w,p,h,g,b,j]);return e.jsxs("div",{className:"flex items-stretch gap-6",children:[e.jsx("div",{className:"flex-shrink-0 w-24 self-stretch",children:e.jsxs("div",{className:"h-full border border-slate-200 rounded-lg bg-white shadow-sm flex flex-col justify-between",children:[e.jsx("div",{className:"text-center pt-3 flex-shrink-0",children:e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:f(t.startTime,t.startPeriod||"AM")})}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0",children:e.jsx("div",{className:"w-px h-full bg-slate-200"})}),e.jsx("div",{className:"text-center pb-3 flex-shrink-0",children:e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:f(t.endTime,t.endPeriod||"AM")})})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"border border-slate-200 rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-primary focus:ring-primary/40"}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"cursor-move text-slate-400 hover:text-slate-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M7 2a2 2 0 1 1 0 4 2 2 0 0 1 0-4zM7 8a2 2 0 1 1 0 4 2 2 0 0 1 0-4zM7 14a2 2 0 1 1 0 4 2 2 0 0 1 0-4zM13 2a2 2 0 1 1 0 4 2 2 0 0 1 0-4zM13 8a2 2 0 1 1 0 4 2 2 0 0 1 0-4zM13 14a2 2 0 1 1 0 4 2 2 0 0 1 0-4z"})})}),e.jsx("h3",{className:"font-semibold text-slate-900 text-base",children:t.title})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{type:"button",className:"p-1 text-slate-400 hover:text-slate-600 rounded","aria-label":"More options",children:e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})})})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:[e.jsx(o,{className:"h-3.5 w-3.5"}),g(t)]}),t.location&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:[e.jsxs("svg",{className:"h-3.5 w-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),b(t.location)]}),t.sessionType&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:["keynote"===t.sessionType?e.jsx("svg",{className:"h-3.5 w-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}):e.jsx(d,{className:"h-3.5 w-3.5"}),j(t.sessionType)]})]}),N&&e.jsx("button",{type:"button",onClick:()=>null==p?void 0:p(t.id),className:"p-1.5 text-slate-400 hover:text-primary rounded border border-slate-300 flex-shrink-0 transition-colors","aria-label":"Add parallel session",children:e.jsx(c,{className:"h-4 w-4"})})]}),t.sections&&t.sections.length>0&&t.sections[0].description&&e.jsx("p",{className:"text-sm text-slate-600 mb-3 leading-relaxed",children:t.sections[0].description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:[e.jsx(m,{className:"h-3.5 w-3.5"}),(null==(y=t.attachments)?void 0:y.length)||0]}),M&&e.jsx("button",{type:"button",onClick:n,className:"p-1 text-slate-400 hover:text-slate-600 rounded","aria-label":l?"Collapse":"Expand",children:l?e.jsx(r,{className:"h-4 w-4"}):e.jsx(i,{className:"h-4 w-4"})})]})]})}),v&&l&&k(t,1)]})]})},w=({sessions:s,selectedDate:a,onAddParallelSession:l})=>{const[n,r]=t.useState(new Set),i=t.useMemo(()=>s.filter(e=>{if(!e.date)return!0;const t=new Date(e.date),s=new Date(a),l=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(s.getFullYear(),s.getMonth(),s.getDate());return l.getTime()===n.getTime()}),[s,a]),{parentSessions:o,parallelSessionsMap:d}=t.useMemo(()=>{const e=[],t={},s=new Set(i.map(e=>e.id));return i.forEach(a=>{a.parentId&&s.has(a.parentId)?(t[a.parentId]||(t[a.parentId]=[]),t[a.parentId].push(a)):e.push(a)}),{parentSessions:e,parallelSessionsMap:t}},[i]);t.useEffect(()=>{const e=Object.keys(d);e.length>0&&r(t=>{const s=new Set(t);return e.forEach(e=>{s.add(e)}),s})},[d]);const c=t.useMemo(()=>{const e={};return o.forEach(t=>{const s=`${t.startTime} ${t.startPeriod||"AM"}`;e[s]||(e[s]=[]),e[s].push(t)}),Object.keys(e).sort((e,t)=>{const[s,a]=e.split(" "),[l,n]=t.split(" "),[r,i]=s.split(":").map(Number),[o,d]=l.split(":").map(Number);let c=60*r+i,m=60*o+d;return"PM"===a&&12!==r&&(c+=720),"PM"===n&&12!==o&&(m+=720),"AM"===a&&12===r&&(c=i),"AM"===n&&12===o&&(m=d),c-m}).map(t=>({time:t,sessions:e[t]}))},[o]),m=e=>{r(t=>{const s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},x=(e,t)=>{const[s,a]=e.split(":").map(Number);let l=60*s+a;return"PM"===t&&12!==s&&(l+=720),"AM"===t&&12===s&&(l=a),l},u=(e,t)=>!0,h=(e,t)=>{const s=String(t||"AM").toUpperCase();return(e=>{const t=(e%1440+1440)%1440;return`${String(Math.floor(t/60)).padStart(2,"0")}:${String(t%60).padStart(2,"0")}`})(x(e,s))},p=e=>`${h(e.startTime,e.startPeriod||"AM")} - ${h(e.endTime,e.endPeriod||"AM")}`,f=e=>({cafeteria:"Cafeteria",room1:"Room 1",room2:"Room 2"}[e]||e),g=e=>({keynote:"Online",workshop:"In-Person"}[e]||e);return 0===c.length?e.jsx("div",{className:"text-sm text-slate-500 text-center py-4",children:"No sessions for this date"}):e.jsx("div",{className:"mt-4 space-y-4",children:c.map((t,s)=>e.jsx("div",{className:"space-y-4",children:t.sessions.map(t=>{const s=d[t.id]||[],a=n.has(t.id);return e.jsx(j,{session:t,parallelSessions:s,isExpanded:a,onToggleExpand:()=>m(t.id),getNestedParallelSessions:e=>[...d[e]||[]].sort((e,t)=>{const s=x(e.startTime,e.startPeriod||"AM"),a=x(t.startTime,t.startPeriod||"AM");return s!==a?s-a:String(e.title).localeCompare(String(t.title))}),isSessionExpanded:e=>n.has(e),onToggleSessionExpand:m,onAddParallelSession:l,formatTime:h,formatTimeRange:p,getLocationLabel:f,getSessionTypeLabel:g,isTimeValid:u},t.id)})},s))})},y=({isOpen:s,onClose:a,onSelect:l})=>{const[n,r]=t.useState("template");return e.jsx(p,{isVisible:s,onClose:a,title:"",showCloseButton:!1,customHeader:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-700",children:"How do you want to create a session?"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Choose a template or create from scratch"})]}),e.jsx("button",{type:"button",onClick:a,className:"inline-flex h-9 w-9 -mt-1 items-center justify-center rounded-md text-slate-500 transition-colors hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/40",children:e.jsx(x,{className:"h-5 w-5"})})]}),width:500,padding:{top:24,right:24,bottom:24,left:24},footer:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("a",{href:"#",className:"flex items-center gap-2 text-sm text-slate-600 hover:text-slate-900 transition-colors ",onClick:e=>{e.preventDefault()},children:[e.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full border border-slate-300 bg-white text-xs text-slate-600",children:"?"}),e.jsx("span",{children:"Need help?"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{type:"button",variant:"secondary",size:"md",onClick:a,children:"Cancel"}),e.jsx(f,{type:"button",variant:"primary",size:"md",onClick:()=>{l(n),a()},children:"Select"})]})]}),children:e.jsx("div",{className:"flex flex-col gap-4 pt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2 -mt-1",children:[e.jsxs("button",{type:"button",onClick:()=>r("template"),className:"flex items-center justify-between rounded-lg border-2 p-4 text-left transition focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 "+("template"===n?"border-primary bg-white":"border-slate-200 bg-white hover:border-slate-300"),children:[e.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Template"}),e.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full border-2 flex-shrink-0 "+("template"===n?"border-primary bg-primary":"border-slate-300 bg-white"),children:"template"===n&&e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-white"})})]}),e.jsxs("button",{type:"button",onClick:()=>r("scratch"),className:"flex items-center justify-between rounded-lg border-2 p-4 text-left transition focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 "+("scratch"===n?"border-primary bg-white":"border-slate-200 bg-white hover:border-slate-300"),children:[e.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Create from scratch"}),e.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full border-2 flex-shrink-0 "+("scratch"===n?"border-primary bg-primary":"border-slate-300 bg-white"),children:"scratch"===n&&e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-white"})})]})]})})})},v=({scheduleName:s="Schedule 1",onUpload:a,onUploadFiles:l,onAddSession:n,onBack:r,sessions:i=[],onDateChange:o,selectedDate:d})=>{const[m,x]=t.useState(!1),[p,j]=t.useState(!1),v=()=>{if(d){if(d instanceof Date){const e=new Date(d);return e.setHours(0,0,0,0),e}if("string"==typeof d){const e=new Date(d);return e.setHours(0,0,0,0),e}}const e=new Date;return e.setHours(0,0,0,0),e},[N,M]=t.useState(v);t.useEffect(()=>{const e=v();M(e),null==o||o(e)},[d]);const S=t.useMemo(()=>{const e=(e,t)=>{if(!e)return 0;const[s,a]=String(e).split(":");let l=Number(s);const n=Number(a??0),r=String(t??"AM").toUpperCase();return"PM"===r&&12!==l&&(l+=12),"AM"===r&&12===l&&(l=0),60*l+(Number.isFinite(n)?n:0)},t=(i||[]).map(e=>{const t=String((null==e?void 0:e.id)??(null==e?void 0:e.uuid)??"");if(!t)return null;const s=String((null==e?void 0:e.sessionType)??(null==e?void 0:e.session_type)??"").toLowerCase(),a=(null==e?void 0:e.parentUuid)??(null==e?void 0:e.parent_uuid)??(null==e?void 0:e.parent_session_uuid)??(null==e?void 0:e.parentSessionUuid)??(null==e?void 0:e.parent_id)??(null==e?void 0:e.parentId)??(null==e?void 0:e.parentId),l=(null==e?void 0:e.date)&&"string"==typeof e.date?new Date(e.date):(null==e?void 0:e.date)instanceof Date?e.date:void 0;return{...e,id:t,date:l,sessionType:s||(null==e?void 0:e.sessionType),parentId:"child"===s&&a?String(a):void 0}}).filter(Boolean),s=t.filter(e=>"parent"===String(e.sessionType??"").toLowerCase()),a=new Map;s.forEach(e=>a.set(e.id,e));const l=t.filter(e=>"child"===String(e.sessionType??"").toLowerCase()),n=new Map,r=[];for(const i of l){const e=i.parentId;if(e&&a.has(e)){const t=n.get(e)??[];t.push(i),n.set(e,t)}else r.push({...i,sessionType:"parent",parentId:void 0})}const o=(t,s)=>e(t.startTime,t.startPeriod)-e(s.startTime,s.startPeriod)||String(t.title??"").localeCompare(String(s.title??"")),d=Array.from(new Map([...s,...r].map(e=>[e.id,e])).values()).sort(o),c=[];for(const i of d){c.push(i);const e=(n.get(i.id)??[]).slice().sort(o);c.push(...e)}return c},[i]);return e.jsxs("main",{className:"relative w-full bg-white px-4 pb-10 pt-8 md:px-8",children:[e.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r&&e.jsx(f,{type:"button",variant:"tertiary",size:"sm",onClick:r,className:"p-2",iconLeading:e.jsx(u,{className:"h-5 w-5"}),"aria-label":"Back to schedule list"}),e.jsx("h1",{className:"font-manrope text-[26px] font-semibold leading-10 text-primary-dark md:text-[32px] md:leading-10",children:s})]}),e.jsx(f,{type:"button","data-schedule-upload":"true",variant:"primary",size:"md",onClick:()=>{x(!0),null==a||a()},iconLeading:e.jsx(h,{className:"h-4 w-4"}),style:{fontFamily:"Inter"},children:"Upload"})]}),e.jsxs("div",{className:"mt-6 flex min-h-[22rem] flex-col gap-6 overflow-hidden rounded border border-slate-200 bg-white px-4 py-6 shadow-sm md:min-h-[819px] md:px-8",children:[e.jsx(b,{initialDate:N,onDateChange:e=>{(e=>{const t=new Date(e);t.setHours(0,0,0,0),M(t),null==o||o(t)})(e)}}),e.jsx("div",{children:e.jsx(f,{type:"button",variant:"primary",size:"md",onClick:()=>j(!0),iconLeading:e.jsx(c,{className:"h-4 w-4"}),style:{fontFamily:"Inter"},children:"Add session"})}),S&&S.length>0?e.jsx(w,{sessions:S,selectedDate:N,onAddParallelSession:e=>null==n?void 0:n(e)}):e.jsx("div",{className:"flex flex-1 items-center justify-center text-center text-base text-slate-500",children:"Upload your schedule or create custom sessions!"})]}),e.jsx(g,{isOpen:m,onClose:()=>{x(!1)},onUpload:l,multiple:!1,onDownloadTemplate:()=>{const e=document.createElement("a");e.href="/assets/Session%20templates-Bg5TU7QQ.xlsx",e.download="Session template.xlsx",document.body.appendChild(e),e.click(),document.body.removeChild(e)},showTemplate:!0,templateLabel:"Session Template"}),e.jsx(y,{isOpen:p,onClose:()=>j(!1),onSelect:e=>{j(!1),null==n||n(void 0,e)}})]})};export{v as S,w as a};
