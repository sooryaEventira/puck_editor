import{j as e}from"./puck-vendor-BeE6vXWX.js";import{r as t}from"./react-vendor-BdxBrZfF.js";import{r as s}from"./eventLocalStore-CWbqpkVu.js";import{f as a}from"./publicAttendeeService-Bkz1Wwwl.js";import"./index-Cuj1Wa0k.js";import"./icons-vendor-BRMUrJuS.js";const n=({eventUuid:n,attendeeId:l,onNavigate:i})=>{const[r,o]=t.useState(null),[d,c]=t.useState("loading");t.useEffect(()=>{let e=!1;return(async()=>{e||c("loading");try{const t=await a(n),s=(Array.isArray(t)?t:[]).map((e,t)=>({id:String(e.uuid??e.id??`attendee-${t}`),name:String(e.name??"").trim()||String([e.first_name,e.last_name].filter(Boolean).join(" ")).trim()||"Unknown",post:e.post??e.title??void 0,institute:e.institute??e.company??void 0,avatarUrl:e.avatarUrl??e.avatar_url??void 0}));e||(o(s),c("success"))}catch{e||(o(null),c("error"))}})(),()=>{e=!0}},[n]);const m=t.useMemo(()=>(r??s(n,"attendees",[])).find(e=>String(e.id)===String(l))||null,[r,l,n]);if(!m&&"loading"===d)return e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6",children:[e.jsx("button",{type:"button",onClick:()=>i(`/events/${n}/attendees`),className:"mb-4 inline-flex items-center gap-2 text-sm font-semibold text-slate-700 hover:text-slate-900",children:"← Back"}),e.jsx("span",{className:"sr-only",children:"Loading attendee"}),e.jsx("div",{className:"animate-pulse",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"h-32 w-32 rounded-xl bg-slate-100 ring-1 ring-slate-200"}),e.jsx("div",{className:"mt-6 h-7 w-56 rounded bg-slate-100"}),e.jsx("div",{className:"mt-2 h-4 w-72 rounded bg-slate-100"})]})})]});if(!m)return e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6",children:[e.jsx("button",{type:"button",onClick:()=>i(`/events/${n}/attendees`),className:"mb-4 inline-flex items-center gap-2 text-sm font-semibold text-slate-700 hover:text-slate-900",children:"← Back"}),e.jsx("div",{className:"text-base font-semibold text-slate-900",children:"Attendee not found"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"This attendee doesn’t exist or hasn’t been published to this browser."})]});const x=[m.post,m.institute].filter(Boolean).join(" • ");return e.jsxs("div",{className:"space-y-10",children:[e.jsx("button",{type:"button",onClick:()=>i(`/events/${n}/attendees`),className:"inline-flex items-center gap-2 text-sm font-semibold text-slate-700 hover:text-slate-900","aria-label":"Back to attendees",children:"← Back"}),e.jsxs("div",{className:"flex flex-col items-center text-center",children:[m.avatarUrl?e.jsx("img",{src:m.avatarUrl,alt:m.name,className:"h-32 w-32 rounded-xl object-cover ring-1 ring-slate-200"}):e.jsx("div",{className:"flex h-32 w-32 items-center justify-center rounded-xl bg-slate-100 ring-1 ring-slate-200 text-xl font-semibold text-slate-500",children:(m.name||"A").split(" ").filter(Boolean).map(e=>e[0]).join("").toUpperCase().slice(0,2)}),e.jsx("h1",{className:"mt-6 text-2xl font-semibold text-slate-900",children:m.name}),x?e.jsx("div",{className:"mt-1 text-sm text-slate-500",children:x}):null]})]})};export{n as default};
