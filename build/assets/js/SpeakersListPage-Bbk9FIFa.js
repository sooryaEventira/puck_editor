import{j as e}from"./puck-vendor-BeE6vXWX.js";import{r as t}from"./react-vendor-BdxBrZfF.js";import{S as s}from"./icons-vendor-BRMUrJuS.js";import{r as a}from"./eventLocalStore-CWbqpkVu.js";import{f as r}from"./publicSpeakerService-CmoIuUK0.js";import{n as l,b as n}from"./indexedSearch-DGht6u-v.js";import"./index-bcMC-VSq.js";const i=({speaker:t})=>{const s=[t.title,t.organization].filter(Boolean).join(" â€¢ ");return e.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[t.avatarUrl?e.jsx("img",{src:t.avatarUrl,alt:t.name,className:"h-12 w-12 rounded-full object-cover ring-1 ring-slate-200"}):e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-100 ring-1 ring-slate-200 text-xs font-semibold text-slate-500",children:(t.name||"S").split(" ").filter(Boolean).map(e=>e[0]).join("").toUpperCase().slice(0,2)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:t.name}),s?e.jsx("div",{className:"truncate text-xs text-slate-500",children:s}):null]})]})},o=({eventUuid:o,onNavigate:d})=>{const[c,m]=t.useState(""),[x,p]=t.useState(null),[u,h]=t.useState(!1);t.useEffect(()=>{let e=!1;return(async()=>{h(!0);try{const t=await r(o),s=(Array.isArray(t)?t:[]).map((e,t)=>({id:String(e.uuid??e.id??`speaker-${t}`),name:String(e.name??"").trim()||String([e.first_name,e.last_name].filter(Boolean).join(" ")).trim()||"Unknown",title:e.title??e.role??void 0,organization:e.organization??e.company??void 0,avatarUrl:e.avatarUrl??e.avatar_url??void 0,bio:e.bio??e.description??void 0}));e||p(s)}catch{e||p(null)}finally{e||h(!1)}})(),()=>{e=!0}},[o]);const f=t.useMemo(()=>x??a(o,"speakers",[]),[x,o]),j=t.useMemo(()=>{const e=new Set;return f.map((t,s)=>{const a=String((null==t?void 0:t.id)??"").trim(),r=l(null==t?void 0:t.name).replace(/\s+/g,"-")||"speaker";let n=a||`${r}-${s}`;for(;e.has(n);)n=`${n}-${s}`;return e.add(n),{...t,id:n}})},[f]),v=t.useMemo(()=>n(j,e=>e.name),[j]),g=t.useMemo(()=>{const e=l(c);if(!e)return j;const t=e.split(" ").filter(Boolean);return v.filter(e=>t.every(t=>e.text.includes(t))).map(e=>e.item)},[j,c,v]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Speakers"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center overflow-hidden rounded-md border border-slate-200 bg-white shadow-sm",children:[e.jsx("input",{value:c,onChange:e=>m(e.target.value),placeholder:"Search speakers",className:"w-[240px] px-3 py-2 text-sm text-slate-700 placeholder:text-slate-400 focus:outline-none"}),e.jsx("button",{type:"button",className:"flex h-9 w-10 items-center justify-center bg-primary text-white","aria-label":"Search",children:e.jsx(s,{className:"h-4 w-4"})})]})})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Showing ",e.jsx("span",{className:"font-semibold text-slate-700",children:g.length})," of"," ",e.jsx("span",{className:"font-semibold text-slate-700",children:j.length})]}),0===g.length?e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6",children:[e.jsx("div",{className:"text-base font-semibold text-slate-900",children:u?"Loading speakersâ€¦":"No speakers found"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Add speakers in Speaker Management to see them here."})]}):e.jsx("div",{className:"space-y-3",children:g.map((t,s)=>e.jsx("button",{type:"button",className:"w-full text-left",onClick:()=>d(`/events/${o}/speakers/${t.id}`),children:e.jsx(i,{speaker:t})},`${t.id}-${s}`))})]})};export{o as default};
