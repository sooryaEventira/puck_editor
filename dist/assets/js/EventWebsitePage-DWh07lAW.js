import{j as e}from"./puck-vendor-DXoNcV6M.js";import{r as t}from"./react-vendor-BdxBrZfF.js";import{u as s,a,P as i,E as r,A as n}from"./index-BiC8NOJs.js";import{d as l,E as o}from"./EventHubContent-CTKmvsp0.js";import{B as d}from"./Button-Bp02bx26.js";import{I as c,c as m,d as x,E as h,f as p,W as b,Z as v,i as w}from"./icons-vendor-CJFH3SbX.js";const u=({onBackClick:u,userAvatarUrl:g,hideNavbarAndSidebar:j=!1})=>{const{eventData:f}=s(),{pages:N,addPage:y,deletePage:k,duplicatePage:C,initializePages:z}=a(),[E,S]=t.useState("website-pages"),[P,L]=t.useState(!1),[D,A]=t.useState(null);t.useEffect(()=>{if(N.length>0)return;const e="true"===localStorage.getItem("create-from-scratch");z(e?"scratch":"default-template")},[N.length,z]);const W=t.useMemo(()=>{const t=l.map(e=>({id:e.id,label:e.title,icon:e.icon}));return[{id:"overview",label:"Overview",icon:e.jsx(c,{className:"h-5 w-5"})},{id:"event-website",label:"Event website",icon:e.jsx(m,{className:"h-5 w-5"})},{id:"event-hub",label:"Event Hub",icon:e.jsx(x,{className:"h-5 w-5"}),subItems:t}]},[]),T=()=>{},$=()=>{},I=()=>{L(!0)},M=async e=>{L(!1);const t=(e=>({attendee:"Attendee page",schedule:"Schedule","html-general":"HTML/General page",folder:"Folder",organization:"Organization page",hyperlink:"Hyperlink","qr-scanner":"App QR Scanner",documents:"Documents list",gallery:"Gallery page",forms:"Forms","meeting-room":"Meeting room"}[e]||"New Page"))(e),s=`page-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;"schedule"===e?(y({id:s,name:t,slug:t.toLowerCase().replace(/[^a-z0-9]+/g,"-"),source:"advanced-component",type:"schedule",component:"SchedulePage"}),await H(s,t)):(y({id:s,name:t,slug:t.toLowerCase().replace(/[^a-z0-9]+/g,"-"),source:"modal-created"}),window.history.pushState({},"",`/event/website/editor/${s}`),window.dispatchEvent(new PopStateEvent("popstate")))},H=async(e,t)=>{try{const s={content:[{type:"SchedulePage",props:{title:t,events:[{id:"1",title:"Welcome presentation",startTime:"08:00 AM",endTime:"09:00 AM",location:"Room A",type:"In-Person",description:"Welcome presentation for all attendees",participants:"",tags:"",attachments:1,isCompleted:!1,isExpanded:!1,parentSessionId:void 0}]},id:`schedule-page-${Date.now()}`}],root:{props:{title:t,pageTitle:t,pageType:"schedule"}},zones:{}},a=n.SAVE_PAGE||"/api/save-page";(await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:s,filename:`${e}.json`})})).ok&&(window.history.pushState({},"",`/event/website/editor/${e}`),window.dispatchEvent(new PopStateEvent("popstate")))}catch(s){}},V=(e,t)=>{const s=N.find(t=>t.id===e);if(!s)return;const a=N.length>0&&N[0].id===e;switch(t){case"view":window.history.pushState({},"",`/event/website/preview/${e}`),window.dispatchEvent(new PopStateEvent("popstate"));break;case"edit":window.history.pushState({},"",`/event/website/editor/${e}`),window.dispatchEvent(new PopStateEvent("popstate"));break;case"duplicate":C(e);break;case"delete":if(a)return void alert("The first page cannot be deleted.");A({id:e,name:s.name})}},B=()=>{D&&(k(D.id),A(null))},F=N.length>0?N[0].id:null;return j?e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex-1 p-8 bg-white overflow-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6 w-full",children:[e.jsx("h1",{className:"text-[26px] font-bold text-primary-dark",children:"Event Website"}),e.jsxs("div",{className:"flex items-center gap-3 flex-nowrap overflow-visible",children:[e.jsx(d,{variant:"secondary",size:"md",onClick:T,iconLeading:e.jsx(h,{className:"h-4 w-4"}),children:"Preview"}),e.jsx(d,{variant:"primary",size:"sm",onClick:$,iconLeading:e.jsx(x,{className:"h-3.5 w-3.5"}),"data-modal-button":"true",className:"bg-[#6938EF] hover:bg-[#5925DC] text-white text-xs",children:"Publish Website"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6 border-b border-slate-200",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>S("website-pages"),className:"pb-3 px-1 h-auto rounded-none border-b-2 transition-colors relative "+("website-pages"===E?"text-primary border-b-primary":"text-slate-600 hover:text-slate-900 border-b-transparent"),children:"Website pages"}),e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>S("website-header"),className:"pb-3 px-1 h-auto rounded-none border-b-2 transition-colors relative "+("website-header"===E?"text-primary border-b-primary":"text-slate-600 hover:text-slate-900 border-b-transparent"),children:"Website header"})]}),e.jsx(d,{variant:"primary",size:"md",onClick:I,iconLeading:e.jsx(p,{className:"h-4 w-4"}),children:"New page"})]}),"website-pages"===E&&e.jsx("div",{children:e.jsx("div",{className:"space-y-0 border border-slate-200 rounded-lg bg-white",children:0===N.length?e.jsx("div",{className:"flex items-center justify-center py-8 text-slate-500",children:e.jsx("p",{children:'No pages yet. Click "+ New Page" to create one.'})}):N.map(t=>{const s=t.id===F;return e.jsxs("div",{className:"flex items-center justify-between py-2 px-4 border-b border-slate-200 last:border-b-0 hover:bg-slate-50 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>V(t.id,"view"),className:"p-2 text-slate-400 hover:text-slate-600","aria-label":"View",iconLeading:e.jsx(h,{className:"h-4 w-4"})}),e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>V(t.id,"edit"),className:"p-2 text-slate-400 hover:text-slate-600","aria-label":"Edit",iconLeading:e.jsx(b,{className:"h-4 w-4"})}),e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>V(t.id,"duplicate"),className:"p-2 text-slate-400 hover:text-slate-600","aria-label":"Duplicate",iconLeading:e.jsx(v,{className:"h-4 w-4"})}),e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>V(t.id,"delete"),className:"p-2 hover:text-red-600 "+(s?"text-slate-300 cursor-not-allowed opacity-50":"text-slate-400"),"aria-label":"Delete",disabled:s,iconLeading:e.jsx(w,{className:"h-4 w-4"})})]})]},t.id)})})}),"website-header"===E&&e.jsx("div",{children:e.jsx("p",{className:"text-slate-600",children:"Website header settings will be implemented here."})})]}),e.jsx(i,{isVisible:P,onClose:()=>L(!1),onSelect:M}),D&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Delete Page"}),e.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:['Are you sure you want to delete "',D.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(d,{variant:"secondary",size:"md",onClick:()=>A(null),children:"Cancel"}),e.jsx(d,{variant:"primary",size:"md",onClick:B,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]}):e.jsxs("div",{className:"h-screen overflow-hidden bg-white",children:[e.jsx(r,{eventName:(null==f?void 0:f.eventName)||"Highly important conference of 2025",isDraft:!0,onBackClick:u,onSearchClick:()=>{},onNotificationClick:()=>{},onProfileClick:()=>{},userAvatarUrl:g}),e.jsx(o,{items:W,activeItemId:"event-website",onItemClick:e=>{if(j)return;if("event-hub"===e)return window.history.pushState({},"","/event/hub"),void window.dispatchEvent(new PopStateEvent("popstate"));return l.some(t=>t.id===e)?(window.history.pushState({section:e},"",`/event/hub?section=${e}`),void window.dispatchEvent(new PopStateEvent("popstate"))):void 0}}),e.jsxs("div",{className:"flex-1 p-8 bg-white overflow-x-auto overflow-y-auto ml-[250px] mt-16 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6 w-full",children:[e.jsx("h1",{className:"text-[26px] font-bold text-primary-dark",children:"Event Website"}),e.jsxs("div",{className:"flex items-center gap-3 flex-nowrap overflow-visible",children:[e.jsx(d,{variant:"secondary",size:"md",onClick:T,iconLeading:e.jsx(h,{className:"h-4 w-4"}),children:"Preview"}),e.jsx(d,{variant:"primary",size:"sm",onClick:$,iconLeading:e.jsx(x,{className:"h-3.5 w-3.5"}),"data-modal-button":"true",className:"bg-[#6938EF] hover:bg-[#5925DC] text-white text-xs",children:"Publish Website"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6 border-b border-slate-200",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>S("website-pages"),className:"pb-3 px-1 h-auto rounded-none border-b-2 transition-colors relative "+("website-pages"===E?"text-primary border-b-primary":"text-slate-600 hover:text-slate-900 border-b-transparent"),children:"Website pages"}),e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>S("website-header"),className:"pb-3 px-1 h-auto rounded-none border-b-2 transition-colors relative "+("website-header"===E?"text-primary border-b-primary":"text-slate-600 hover:text-slate-900 border-b-transparent"),children:"Website header"})]}),e.jsx(d,{variant:"primary",size:"md",onClick:I,iconLeading:e.jsx(p,{className:"h-4 w-4"}),children:"New page"})]}),"website-pages"===E&&e.jsx("div",{children:e.jsx("div",{className:"space-y-0 bg-slate-100 rounded-lg",children:0===N.length?e.jsx("div",{className:"flex items-center justify-center py-8 text-slate-500",children:e.jsx("p",{children:'No pages yet. Click "+ New Page" to create one.'})}):N.map(t=>{const s=t.id===F;return e.jsxs("div",{className:"flex items-center justify-between py-2 px-4 border-b border-slate-200 last:border-b-0 hover:bg-slate-50 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>V(t.id,"view"),className:"p-2 text-slate-400 hover:text-slate-600","aria-label":"View",iconLeading:e.jsx(h,{className:"h-4 w-4"})}),e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>V(t.id,"edit"),className:"p-2 text-slate-400 hover:text-slate-600","aria-label":"Edit",iconLeading:e.jsx(b,{className:"h-4 w-4"})}),e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>V(t.id,"duplicate"),className:"p-2 text-slate-400 hover:text-slate-600","aria-label":"Duplicate",iconLeading:e.jsx(v,{className:"h-4 w-4"})}),e.jsx(d,{variant:"tertiary",size:"sm",onClick:()=>V(t.id,"delete"),className:"p-2 hover:text-red-600 "+(s?"text-slate-300 cursor-not-allowed opacity-50":"text-slate-400"),"aria-label":"Delete",disabled:s,iconLeading:e.jsx(w,{className:"h-4 w-4"})})]})]},t.id)})})}),"website-header"===E&&e.jsx("div",{children:e.jsx("p",{className:"text-slate-600",children:"Website header settings will be implemented here."})})]}),e.jsx(i,{isVisible:P,onClose:()=>L(!1),onSelect:M}),D&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Delete Page"}),e.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:['Are you sure you want to delete "',D.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(d,{variant:"secondary",size:"md",onClick:()=>A(null),children:"Cancel"}),e.jsx(d,{variant:"primary",size:"md",onClick:B,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})};export{u as E};
