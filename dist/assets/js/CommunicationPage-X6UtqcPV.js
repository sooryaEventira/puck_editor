import{j as e}from"./puck-vendor-DXoNcV6M.js";import{R as t,r as s}from"./react-vendor-BdxBrZfF.js";import{B as n,M as a,u as r,E as o}from"./index-BiC8NOJs.js";import{d as l,E as i}from"./EventHubContent-CTKmvsp0.js";import{D as c}from"./DividerLineTable-CmP39SD5.js";import{u as d,T as m}from"./TableHeader-Ci3omupd.js";import{H as u,M as x,B as p,P as h,T as f,j as g,k as b,g as v,l as j,m as y,n as w,o as N,p as C,q as S,r as D,s as A,t as M,u as k,f as E,X as T,I as L,c as R,d as F}from"./icons-vendor-CJFH3SbX.js";import{B as I}from"./Button-Bp02bx26.js";const B=({checked:s,indeterminate:n,onChange:a,ariaLabel:r})=>{const o=t.useRef(null);return t.useEffect(()=>{o.current&&(o.current.indeterminate=n)},[n]),e.jsx("input",{ref:o,type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-primary focus:ring-primary/40","aria-label":r,checked:s,onChange:e=>a(e.target.checked)})},z=e=>{switch(e){case"sent":return"success";case"scheduled":return"primary";case"draft":return"warning";default:return"neutral"}},H=({communications:a,macros:r=[],onCreateBroadcast:o,onEditCommunication:l,onCreateMacro:i,onEditMacro:g,onDeleteMacro:b})=>{const[v,j]=s.useState(""),[y,w]=s.useState("list"),[N,C]=s.useState(new Set),[S,D]=s.useState(new Set),[A,M]=s.useState(1),[k,E]=s.useState({list:{column:"title",direction:"ascending"},macros:{column:"macro",direction:"ascending"}}),T=s.useMemo(()=>{const e=v.trim().toLowerCase();return e?a.filter(t=>[t.title,...t.userGroups.map(e=>e.name),t.status,t.type].filter(Boolean).join(" ").toLowerCase().includes(e)):a},[v,a]),L=s.useMemo(()=>{const e=v.trim().toLowerCase();return e?r.filter(t=>[t.macro,t.column].filter(Boolean).join(" ").toLowerCase().includes(e)):r},[v,r]),R=s.useMemo(()=>T.map(e=>e.id),[T]),F=s.useMemo(()=>L.map(e=>e.id),[L]),I=s.useMemo(()=>{const e=10*(A-1),t=e+10;return T.slice(e,t)},[T,A]),H=s.useMemo(()=>{const e=10*(A-1),t=e+10;return L.slice(e,t)},[L,A]),O=s.useMemo(()=>{const e="list"===y?T.length:L.length;return Math.ceil(e/10)},[y,T.length,L.length]),P=s.useMemo(()=>"list"===y?R.length>0&&R.every(e=>N.has(e)):F.length>0&&F.every(e=>S.has(e)),[y,R,F,N,S]),$=s.useMemo(()=>"list"===y?!P&&R.some(e=>N.has(e)):!P&&F.some(e=>S.has(e)),[y,P,R,F,N,S]),_=s.useCallback(e=>{"list"===y?C(t=>{const s=new Set(t);return R.forEach(t=>{e?s.add(t):s.delete(t)}),s}):D(t=>{const s=new Set(t);return F.forEach(t=>{e?s.add(t):s.delete(t)}),s})},[y,R,F]),U=s.useCallback((e,t)=>{"list"===y?C(s=>{const n=new Set(s);return t?n.add(e):n.delete(e),n}):D(s=>{const n=new Set(s);return t?n.add(e):n.delete(e),n})},[y]),V=s.useMemo(()=>"list"===y?I.map((e,t)=>({communication:e,index:t})):H.map((e,t)=>({macro:e,index:t})),[y,I,H]),G=(({allVisibleSelected:t,partiallySelected:a,selectedCommunicationIds:r,onToggleAllVisible:o,onToggleRow:l,onEditCommunication:i})=>s.useMemo(()=>[{id:"title",header:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{checked:t,indeterminate:a,onChange:o,ariaLabel:"Select all communications"}),e.jsx("span",{children:"Title"})]}),sortable:!0,sortAccessor:({communication:e})=>(null==e?void 0:e.title)||"",render:({communication:t})=>t?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-primary focus:ring-primary/40","aria-label":`Select ${t.title}`,checked:r.has(t.id),onChange:e=>l(t.id,e.target.checked)}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.title})]}):null},{id:"userGroups",header:"User Groups",sortable:!0,sortAccessor:({communication:e})=>(null==e?void 0:e.userGroups.map(e=>e.name).join(" "))||"",render:({communication:t})=>t?e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.userGroups.slice(0,3).map((t,s)=>{return e.jsx(n,{variant:(a=t.variant,"primary"===a?"primary":"secondary"===a?"info":"muted"),children:t.name},s);var a}),t.userGroups.length>3&&e.jsxs(n,{variant:"muted",children:["+",t.userGroups.length-3]})]}):null},{id:"status",header:"Status",sortable:!0,sortAccessor:({communication:e})=>(null==e?void 0:e.status)||"",render:({communication:t})=>t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:z(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),"scheduled"===t.status&&t.scheduledDate&&e.jsxs("div",{className:"group relative",children:[e.jsx(u,{className:"h-4 w-4 text-slate-500 cursor-help"}),e.jsx("div",{className:"absolute left-0 top-6 z-10 hidden w-48 rounded-md bg-slate-900 px-3 py-2 text-xs text-white shadow-lg group-hover:block",children:new Date(t.scheduledDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}):null},{id:"type",header:"Type",sortable:!0,sortAccessor:({communication:e})=>(null==e?void 0:e.type)||"",render:({communication:t})=>t?e.jsx("div",{className:"flex items-center",children:"email"===t.type?e.jsx(x,{className:"h-5 w-5 text-slate-500"}):e.jsx(p,{className:"h-5 w-5 text-slate-500"})}):null},{id:"recipients",header:"Recipients",sortable:!0,sortAccessor:({communication:e})=>(null==e?void 0:e.recipients.sent)||0,render:({communication:t})=>t?e.jsxs("span",{className:"text-sm text-slate-600",children:[t.recipients.sent,"/",t.recipients.total]}):null},{id:"actions",header:"",align:"right",render:({communication:t})=>t?e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>null==i?void 0:i(t.id),className:"flex h-9 w-9 items-center justify-center text-slate-500 transition hover:text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/40","aria-label":`Edit ${t.title}`,children:e.jsx(h,{className:"h-4 w-4",strokeWidth:1.8})}),e.jsx("button",{type:"button",className:"flex h-9 w-9 items-center justify-center text-slate-500 transition hover:border-rose-400 hover:text-rose-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300/60","aria-label":`Delete ${t.title}`,children:e.jsx(f,{className:"h-4 w-4",strokeWidth:1.8})})]}):null}],[t,a,r,o,l,i]))({allVisibleSelected:P,partiallySelected:$,selectedCommunicationIds:N,onToggleAllVisible:_,onToggleRow:U,onEditCommunication:l}),W=(({allVisibleSelected:t,partiallySelected:n,selectedMacroIds:a,onToggleAllVisible:r,onToggleRow:o,onEditMacro:l,onDeleteMacro:i})=>s.useMemo(()=>[{id:"macro",header:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{checked:t,indeterminate:n,onChange:r,ariaLabel:"Select all macros"}),e.jsx("span",{children:"Macro"})]}),sortable:!0,sortAccessor:({macro:e})=>(null==e?void 0:e.macro)||"",render:({macro:t})=>t?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-primary focus:ring-primary/40","aria-label":`Select ${t.macro}`,checked:a.has(t.id),onChange:e=>o(t.id,e.target.checked)}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.macro})]}):null},{id:"column",header:"Columns",sortable:!0,sortAccessor:({macro:e})=>(null==e?void 0:e.column)||"",render:({macro:t})=>t?e.jsx("span",{className:"text-sm text-slate-600",children:t.column}):null},{id:"actions",header:"",align:"right",render:({macro:t})=>t?e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>null==l?void 0:l(t.id),className:"flex h-9 w-9 items-center justify-center text-slate-500 transition hover:text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/40","aria-label":`Edit ${t.macro}`,children:e.jsx(h,{className:"h-4 w-4",strokeWidth:1.8})}),e.jsx("button",{type:"button",onClick:()=>null==i?void 0:i(t.id),className:"flex h-9 w-9 items-center justify-center text-slate-500 transition hover:border-rose-400 hover:text-rose-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300/60","aria-label":`Delete ${t.macro}`,children:e.jsx(f,{className:"h-4 w-4",strokeWidth:1.8})})]}):null}],[t,n,a,r,o,l,i]))({allVisibleSelected:P,partiallySelected:$,selectedMacroIds:S,onToggleAllVisible:_,onToggleRow:U,onEditMacro:g,onDeleteMacro:b}),X=s.useMemo(()=>"list"===y?G:W,[y,G,W]),Y=e.jsx("div",{className:"flex min-h-[280px] items-center justify-center px-6 py-10 text-sm text-slate-500",children:"list"===y?0===a.length?"No emails/notifications created!":"No communications match your search.":0===r.length?"No macros created!":"No macros match your search."}),q=d({tabs:[{id:"list",label:"List"},{id:"macros",label:"Macros"}],activeTabId:y,searchQuery:v,searchPlaceholder:"list"===y?"Search communication":"Search macros",onTabChange:e=>w(e),onSearchChange:j}),J=s.useCallback(e=>{E(t=>({...t,[y]:e}))},[y]);return t.useEffect(()=>{M(1)},[y]),e.jsxs("div",{className:"space-y-8 px-4 pb-12 pt-8 md:px-10 lg:px-16 ",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between ",children:[e.jsx("h1",{className:"text-[26px] font-bold text-primary-dark ",children:"Communication"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{type:"button",onClick:"list"===y?o:i,className:"inline-flex items-center justify-center rounded-md  px-4 py-2 text-sm font-semibold text-white border border-slate-200 bg-primary shadow-sm transition hover:bg-primary/90 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/40",children:"list"===y?"+ New broadcast":"+ New macro"})})]}),e.jsx(c,{headerLeading:q.leading,headerActions:q.actions,data:V,columns:X,getRowKey:e=>{var t,s;return(null==(t=e.communication)?void 0:t.id)||(null==(s=e.macro)?void 0:s.id)||""},emptyState:Y,sortDescriptor:k[y],onSortChange:J,footer:e.jsx(m,{currentPage:A,totalPages:O,onPageChange:M})})]})},O=({isOpen:t,onClose:n,onSelect:r})=>{const[o,l]=s.useState("push-notification"),i=e=>{l(e),r(e),n()};return e.jsx(a,{isVisible:t,onClose:()=>{l(null),n()},title:"Select broadcast type",subtitle:"Choose how to deliver your message to recipients.",width:548,maxWidth:548,borderRadius:16,showHeaderBorder:!1,padding:{top:24,right:24,bottom:24,left:24},children:e.jsxs("div",{className:"flex items-center justify-center gap-4 overflow-hidden",children:[e.jsx("button",{type:"button",onClick:()=>i("email"),className:"flex w-[240px] max-w-[240px] h-[100px] flex-col gap-2 rounded-xl border pt-4 pr-6 pb-4 pl-6 text-left transition-all "+("email"===o?"border-primary bg-primary/5":"border-slate-200 bg-white hover:border-primary/40 hover:bg-slate-50"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 flex-1",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Email"}),e.jsx("span",{className:"text-xs text-slate-500 leading-relaxed",children:"Send via email to subscriber inboxes."})]}),e.jsx("div",{className:"flex h-5 w-5 items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("input",{type:"radio",name:"broadcast-type",checked:"email"===o,onChange:()=>i("email"),className:"h-4 w-4 border-slate-300 text-primary focus:ring-primary/40 accent-primary"})})]})}),e.jsx("button",{type:"button",onClick:()=>i("push-notification"),className:"flex w-[240px] max-w-[240px] h-[100px] flex-col gap-2 rounded-xl border pt-4 pr-6 pb-4 pl-6 text-left transition-all "+("push-notification"===o?"border-2 border-primary bg-primary/5":"border-slate-200 bg-white hover:border-primary/40 hover:bg-slate-50"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 flex-1",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Push Notification"}),e.jsx("span",{className:"text-xs text-slate-500 leading-relaxed",children:"Send instant mobile/ browser notifications."})]}),e.jsx("div",{className:"flex h-5 w-5 items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("input",{type:"radio",name:"broadcast-type",checked:"push-notification"===o,onChange:()=>i("push-notification"),className:"h-4 w-4 border-slate-300 text-primary focus:ring-primary/40 accent-primary"})})]})})]})})},P=({isOpen:t,onClose:s,onSend:n,subject:r,message:o})=>e.jsx(a,{isVisible:t,onClose:s,title:"Preview ",width:600,maxWidth:800,borderRadius:16,padding:{top:24,right:24,bottom:24,left:24},children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-slate-900",children:"Subject: "}),e.jsx("span",{className:"text-slate-700",children:r})]}),e.jsx("div",{className:"border-t border-slate-200 pt-4",children:e.jsx("div",{className:"broadcast-editor-content text-slate-600",dangerouslySetInnerHTML:{__html:o}})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-primary/20",children:"Cancel"}),e.jsx("button",{type:"button",onClick:n,className:"rounded-md bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/20",children:"Send"})]})]})}),$=({isOpen:t,onClose:n,onSchedule:a})=>{const[r,o]=s.useState(new Date),[l,i]=s.useState(null),[c,d]=s.useState("10:00 AM");if(s.useEffect(()=>{t&&!l&&i(new Date)},[t,l]),!t)return null;const m=(e,t)=>new Date(e,t+1,0).getDate(),u=r.getFullYear(),x=r.getMonth(),p=m(u,x),h=new Date(u,x,1).getDay();const f=0===h?6:h-1;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"w-full max-w-lg overflow-hidden rounded-xl bg-white shadow-2xl flex flex-col md:flex-row h-auto md:h-[500px] max-h-[90vh]",children:[e.jsxs("div",{className:"border-r-0 md:border-r border-[#E9EAEB] border-b md:border-b-0 bg-white p-2 md:p-3 flex flex-row md:flex-col gap-0.5 w-full md:w-[160px] overflow-x-auto md:overflow-x-visible shrink-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-col gap-0.5 shrink-0 min-w-[120px] md:min-w-0",children:[e.jsx("div",{className:"w-full px-3 py-2 bg-[#FAFAFA] border-b border-[#D5D7DA] flex items-center",children:e.jsx("div",{className:"text-sm font-semibold text-[#252B37]",children:"Date"})}),e.jsx("button",{onClick:()=>{const e=new Date;i(e),o(e)},className:"w-full px-3 py-2 rounded-md text-sm font-medium text-left transition whitespace-nowrap "+(l&&l.toDateString()===(new Date).toDateString()?"bg-primary/10 text-primary":"text-[#414651] hover:bg-slate-50"),children:"Today"})]}),e.jsxs("div",{className:"flex flex-col md:flex-col gap-0.5 shrink-0 min-w-[120px] md:min-w-0",children:[e.jsx("div",{className:"w-full px-3 py-2 bg-[#FAFAFA] border-b border-[#D5D7DA] flex items-center",children:e.jsx("div",{className:"text-sm font-semibold text-[#252B37]",children:"Time"})}),["10:00 AM","11:00 AM","12:00 PM"].map(t=>e.jsx("button",{onClick:()=>d(t),className:"w-full px-3 py-2 rounded-md text-sm font-medium text-left transition whitespace-nowrap "+(c===t?"bg-primary/10 text-primary":"text-[#414651] hover:bg-slate-50"),children:t},t)),e.jsx("button",{onClick:()=>d("Custom"),className:"w-full px-3 py-2 rounded-md text-sm font-medium text-left transition whitespace-nowrap "+("Custom"===c?"bg-primary/10 text-primary":"text-[#414651] hover:bg-slate-50"),children:"Custom time"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col px-3 sm:px-4 md:px-6 py-3 md:py-5 gap-3 overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-center relative px-6 sm:px-8",children:[e.jsx("button",{onClick:()=>{o(new Date(u,x-1,1))},className:"absolute left-0 p-1 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100",children:e.jsx(g,{className:"h-5 w-5"})}),e.jsxs("h2",{className:"text-sm font-semibold text-[#414651]",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][x]," ",u]}),e.jsx("button",{onClick:()=>{o(new Date(u,x+1,1))},className:"absolute right-0 p-1 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100",children:e.jsx(b,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2 md:gap-3 min-h-0",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1",children:["Mo","Tu","We","Th","Fr","Sa","Su"].map(t=>e.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 flex items-center justify-center",children:e.jsx("div",{className:"text-xs sm:text-sm font-medium text-[#414651]",children:t})},t))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:f}).map((t,s)=>{const n=0===x?11:x-1,a=0===x?u-1:u,r=m(a,n)-f+s+1,o=new Date,l=o.getDate()===r&&o.getMonth()===n&&o.getFullYear()===a;return e.jsxs("div",{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 relative flex items-center justify-center",children:[e.jsx("div",{className:"text-xs sm:text-sm font-normal text-[#717680]",children:r}),l&&e.jsx("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 md:w-1.5 md:h-1.5 rounded-full bg-[#A4A7AE]"})]},`prev-${s}`)}),Array.from({length:p}).map((t,s)=>{const n=s+1,a=(e=>!!l&&l.getDate()===e&&l.getMonth()===x&&l.getFullYear()===u)(n),r=(e=>{const t=new Date;return t.getDate()===e&&t.getMonth()===x&&t.getFullYear()===u})(n);return e.jsxs("button",{onClick:()=>(e=>{const t=new Date(u,x,e);i(t)})(n),className:`\n                      w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 relative flex items-center justify-center rounded-full text-xs sm:text-sm transition\n                      ${a?"bg-[#6938EF] text-white font-medium":r?"bg-[#FAFAFA] text-[#414651] font-medium hover:bg-[#FAFAFA]":"text-[#414651] font-normal hover:bg-[#FAFAFA] hover:text-[#252B37] hover:font-medium"}\n                    `,children:[e.jsx("div",{children:n}),r&&!a&&e.jsx("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 md:w-1.5 md:h-1.5 rounded-full bg-[#6938EF]"})]},n)}),Array.from({length:Math.max(0,42-f-p)}).map((t,s)=>{const n=s+1,a=11===x?0:x+1,r=11===x?u+1:u,o=new Date,l=o.getDate()===n&&o.getMonth()===a&&o.getFullYear()===r;return e.jsxs("div",{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 relative flex items-center justify-center",children:[e.jsx("div",{className:"text-xs sm:text-sm font-normal text-[#717680]",children:n}),l&&e.jsx("div",{className:"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 md:w-1.5 md:h-1.5 rounded-full bg-[#A4A7AE]"})]},`next-${s}`)})]})]}),e.jsxs("div",{className:"pt-2 pb-3 md:pb-4 px-3 md:px-4 border-t border-[#E9EAEB] flex flex-col items-stretch sm:items-end gap-3 shrink-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-1 w-full sm:w-auto",children:[e.jsx("div",{className:"flex-1 sm:w-[136px] px-3 py-2 bg-white rounded-lg border border-[#D5D7DA] shadow-sm",children:e.jsx("div",{className:"text-sm sm:text-base font-normal text-[#181D27]",children:l?l.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Select date"})}),e.jsx("div",{className:"flex-1 sm:w-[136px] px-3 py-2 bg-white rounded-lg border border-[#D5D7DA] shadow-sm",children:e.jsx("div",{className:"text-sm sm:text-base font-normal text-[#181D27] text-center",children:c})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsx("button",{onClick:n,className:"w-full sm:w-auto px-[14px] py-[10px] bg-white rounded-lg border border-[#D5D7DA] shadow-sm text-sm font-semibold text-[#414651] hover:bg-slate-50 transition",children:"Cancel"}),e.jsx("button",{onClick:()=>{if(l){const[e,t]=c.split(" "),[s,n]=e.split(":").map(Number);let r=s;"PM"===t&&12!==s&&(r+=12),"AM"===t&&12===s&&(r=0);const o=new Date(l);o.setHours(r,n),a(o)}},className:"w-full sm:w-auto px-[14px] py-[10px] bg-[#6938EF] rounded-lg border-2 border-white shadow-sm text-sm font-semibold text-white hover:bg-[#5d2fd4] transition",children:"Apply"})]})]})]})]})})},_=({onCancel:t,onSave:n,onSend:a,macros:r=[],initialSubject:o="",initialMessage:l="",type:i="email"})=>{const[c,d]=s.useState("late-message"),[m,u]=s.useState(o||""),[x,p]=s.useState(l),[h,f]=s.useState(!0),[g,b]=s.useState(""),[L,R]=s.useState(!1),[F,B]=s.useState("#000000"),[z,H]=s.useState(!1),[O,_]=s.useState({top:0,left:0}),[U,V]=s.useState(!1),[G,W]=s.useState(!1),[X,Y]=s.useState(!1),[q,J]=s.useState(!1),[K,Q]=s.useState(!1),[Z,ee]=s.useState("ANY"),[te,se]=s.useState([{id:"1",field:"Group",operator:"is",value:"Speakers"}]),ne=s.useRef(null),ae=s.useRef(null),re=s.useRef(null),oe=s.useRef(null),le=s.useRef(null);s.useEffect(()=>{le.current&&l&&le.current.innerHTML!==l&&(le.current.innerHTML=l)},[]);const ie=[["#000000","#1E3A8A","#166534","#374151","#6B7280","#9CA3AF","#FFFFFF"],["#10B981","#3B82F6","#7F56D9","#EC4899","#EF4444","#F59E0B"]],ce=(e,t)=>{var s,n;if(!le.current)return;document.activeElement!==le.current&&le.current.focus();const a=window.getSelection();if("foreColor"===e&&(!a||0===a.rangeCount||0===a.toString().length)){const e=document.createRange(),t=window.getSelection();if(t&&le.current)if(t.anchorNode){const a=t.anchorNode.nodeType===Node.TEXT_NODE?t.anchorNode:le.current;if(a){const o=t.anchorOffset||0;try{e.setStart(a,Math.min(o,(null==(s=a.textContent)?void 0:s.length)||0)),e.setEnd(a,Math.min(o,(null==(n=a.textContent)?void 0:n.length)||0)),t.removeAllRanges(),t.addRange(e)}catch(r){e.selectNodeContents(le.current),e.collapse(!1),t.removeAllRanges(),t.addRange(e)}}}else e.selectNodeContents(le.current),e.collapse(!1),t.removeAllRanges(),t.addRange(e)}if(!("justifyLeft"!==e&&"justifyCenter"!==e&&"justifyRight"!==e&&"justifyFull"!==e||a&&0!==a.rangeCount&&0!==a.toString().length)){const e=document.createRange(),t=window.getSelection();if(t&&le.current){let s=le.current;for(t.anchorNode&&(s=t.anchorNode.nodeType===Node.TEXT_NODE?t.anchorNode.parentElement||le.current:t.anchorNode);s&&s!==le.current&&!["P","DIV","H1","H2","H3","H4","H5","H6","LI"].includes(s.tagName);)s=s.parentElement||le.current;s&&(e.selectNodeContents(s),t.removeAllRanges(),t.addRange(e))}}try{document.execCommand(e,!1,t)&&(le.current&&p(le.current.innerHTML),setTimeout(()=>{de()},10))}catch(o){}},de=()=>{if(le.current){const t=document.activeElement;if(t&&"subject"===t.id)return;const s=document.activeElement===le.current;if(!s){const e=document.getElementById("subject");if(e&&(e===t||e.contains(t)))return;le.current.focus()}try{V(document.queryCommandState("bold")),W(document.queryCommandState("italic")),Y(document.queryCommandState("underline"))}catch(e){}if(!s){const e=window.getSelection();e&&e.rangeCount}}},me=()=>{setTimeout(()=>{const e=document.activeElement;if(e&&"subject"===e.id)return;const t=window.getSelection(),s=le.current;if(s)if(document.activeElement===s&&de(),t&&t.toString().length>0){const e=t.anchorNode,n=t.focusNode;if(s&&(s.contains(e)||s.contains(n)||e===s||n===s)){const e=t.getRangeAt(0).getBoundingClientRect(),n=s.getBoundingClientRect();_({top:e.top-n.top-40,left:e.left-n.left+e.width/2}),H(!0)}}else H(!1)},10)};s.useEffect(()=>{const e=le.current;if(e)return e.addEventListener("mouseup",me),e.addEventListener("keyup",me),e.addEventListener("selectionchange",me),()=>{e.removeEventListener("mouseup",me),e.removeEventListener("keyup",me),e.removeEventListener("selectionchange",me)}},[]),s.useEffect(()=>{const e=e=>{var t,s;const n=e.target,a=document.getElementById("subject");a&&(a===n||a.contains(n))||(L&&ne.current&&!ne.current.contains(n)&&ae.current&&!ae.current.contains(n)&&(R(!1),oe.current=null),!z||(null==(t=le.current)?void 0:t.contains(n))||(null==(s=re.current)?void 0:s.contains(n))||H(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[L,z]);const ue=(e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),B(e),R(!1),le.current?requestAnimationFrame(()=>{var t;const s=le.current;if(!s)return void(oe.current=null);s.focus();const n=window.getSelection();let a=null;if(oe.current)try{const e=oe.current.cloneRange();s.contains(e.commonAncestorContainer)?a=e:oe.current=null}catch(r){oe.current=null}if(!a&&n&&n.rangeCount>0){const e=n.getRangeAt(0);e&&s.contains(e.commonAncestorContainer)&&(a=e)}if(!a){a=document.createRange();const e=window.getSelection();if(e&&e.anchorNode&&s.contains(e.anchorNode))try{if(e.anchorNode.nodeType===Node.TEXT_NODE){const s=Math.min(e.anchorOffset||0,(null==(t=e.anchorNode.textContent)?void 0:t.length)||0);a.setStart(e.anchorNode,s),a.setEnd(e.anchorNode,s)}else{let e=document.createTreeWalker(s,NodeFilter.SHOW_TEXT,null).nextNode();e?(a.setStart(e,0),a.setEnd(e,0)):(a.selectNodeContents(s),a.collapse(!1))}}catch(r){a.selectNodeContents(s),a.collapse(!1)}else a.selectNodeContents(s),a.collapse(!1)}if(a&&s.contains(a.commonAncestorContainer)){n&&(n.removeAllRanges(),n.addRange(a));try{if(a.toString().trim().length>0){const t=document.createElement("span");t.style.color=e,t.style.setProperty("color",e,"important");const r=a.extractContents();if(r.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(;r.firstChild;)t.appendChild(r.firstChild);else r&&t.appendChild(r);a.insertNode(t),t.setAttribute("data-color-applied",e),t.setAttribute("data-preserve-color","true");const o=`rgb(${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)})`,l=()=>{const s=t.style.color||window.getComputedStyle(t).color;("rgb(0, 0, 0)"===s||s!==o&&s!==e&&s!==`rgb(${parseInt(e.slice(1,3),16)},${parseInt(e.slice(3,5),16)},${parseInt(e.slice(5,7),16)})`)&&(t.style.setProperty("color",e,"important"),t.style.color=e)},i=new MutationObserver(e=>{e.forEach(e=>{"attributes"!==e.type||"style"!==e.attributeName&&"class"!==e.attributeName||l()}),l()});i.observe(t,{attributes:!0,attributeFilter:["style","class"],childList:!0,subtree:!0});const c=new MutationObserver(()=>{s.contains(t)&&l()});c.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),l();const d=setInterval(()=>{s.contains(t)?l():(clearInterval(d),i.disconnect(),c.disconnect())},100),m=()=>{s.contains(t)&&l()};s.addEventListener("input",m);const u=document.createRange();u.selectNodeContents(t),n&&(n.removeAllRanges(),n.addRange(u));s.contains(t);setTimeout(()=>{l();s.innerHTML,window.getComputedStyle(t).color;p(s.innerHTML)},100)}else{const t=a.commonAncestorContainer;if(t.nodeType===Node.TEXT_NODE&&t.textContent){const s=t,r=a.startOffset,o=s.textContent||"",l=o.substring(0,r),i=o.substring(r),c=document.createTextNode(l),d=document.createTextNode(i),m=document.createElement("span");m.style.color=e,m.textContent="​";const u=s.parentNode;if(u){l&&u.insertBefore(c,s),u.insertBefore(m,s),i&&u.insertBefore(d,s),u.removeChild(s);const e=document.createRange();e.setStartAfter(m),e.collapse(!0),n&&(n.removeAllRanges(),n.addRange(e))}}else{const t=document.createElement("span");t.style.color=e,t.textContent="​",a.insertNode(t);const s=document.createRange();s.setStartAfter(t),s.collapse(!0),n&&(n.removeAllRanges(),n.addRange(s))}p(s.innerHTML)}}catch(r){try{document.execCommand("foreColor",!1,e),p(s.innerHTML)}catch(o){}}oe.current=null}else oe.current=null}):oe.current=null},xe=(e,t,s)=>{e.preventDefault(),ce(t,s)};return e.jsxs("div",{className:"space-y-6 px-4 pb-12 pt-28 md:px-10 lg:px-16 -mt-24 min-h-screen flex flex-col",children:[e.jsx("style",{children:"\n        .broadcast-editor-content ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; }\n        .broadcast-editor-content ol { list-style-type: decimal; padding-left: 1.5em; margin-bottom: 1em; }\n        .broadcast-editor-content b, .broadcast-editor-content strong { font-weight: bold; }\n        .broadcast-editor-content i, .broadcast-editor-content em { font-style: italic; }\n        .broadcast-editor-content u { text-decoration: underline; }\n        .broadcast-editor-content p { margin-bottom: 0.5em; }\n        .composer-container { max-height: calc(100vh - 200px); }\n        @media (max-height: 1080px) {\n          .composer-container { max-height: calc(100vh - 300px); }\n        }\n        .composer-editor { min-height: 400px; max-height: none; }\n        @media (max-height: 1080px) {\n          .composer-editor { min-height: 200px; max-height: 250px; }\n        }\n      "}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between ",children:[e.jsx("h1",{className:"text-[26px] font-semibold  text-primary-dark mb-4 ",children:"Communication"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{type:"button",variant:"primary",size:"md",onClick:()=>J(!0),iconTrailing:e.jsx(v,{className:"h-4 w-4"}),children:"Send"}),e.jsx(I,{type:"button",variant:"secondary",size:"md",onClick:()=>Q(!0),iconTrailing:e.jsx(j,{className:"h-4 w-4"}),children:"Schedule"})]})]}),e.jsxs("div",{className:"rounded-xl bg-white overflow-hidden flex flex-col composer-container",children:[e.jsxs("div",{className:"flex gap-6 border-b border-slate-200 flex-shrink-0",children:[e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onClick:()=>d("late-message"),className:"pb-3 px-1 h-auto rounded-none border-b-2 transition-colors relative whitespace-nowrap "+("late-message"===c?"text-primary border-b-primary":"text-slate-600 hover:text-slate-900 border-b-transparent"),children:"Late Message"}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onClick:()=>d("settings"),className:"pb-3 px-1 h-auto rounded-none border-b-2 transition-colors relative whitespace-nowrap "+("settings"===c?"text-primary border-b-primary":"text-slate-600 hover:text-slate-900 border-b-transparent"),children:"Settings"})]}),e.jsx("div",{className:"p-6 border border-slate-200 flex-1 flex flex-col overflow-y-auto min-h-0",children:"late-message"===c?e.jsx("div",{className:"space-y-4 flex-1 flex flex-col min-h-0",children:h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`group relative flex flex-col w-full rounded-md border ${"email"===i&&m.length>60?"border-orange-300":"border-slate-300"} bg-slate-50 transition-all`,onClick:e=>{const t=e.target;if("LABEL"===t.tagName||t===e.currentTarget&&"INPUT"!==t.tagName){const e=document.getElementById("subject");e&&document.activeElement!==e&&setTimeout(()=>{e.focus()},0)}},children:[e.jsxs("div",{className:"flex items-center px-3 pt-2.5",children:[e.jsx("label",{htmlFor:"subject",className:"text-sm font-semibold text-slate-700 mr-2 cursor-text shrink-0",children:"push-notification"===i?"Title:":"Subject:"}),e.jsx("input",{id:"subject",type:"text",placeholder:"Title of your message",value:m,onChange:e=>{const t="push-notification"===i?50:120;e.target.value.length<=t&&u(e.target.value)},onMouseDown:e=>{e.stopPropagation(),setTimeout(()=>{e.currentTarget.focus()},0)},onClick:e=>{e.stopPropagation(),e.currentTarget.focus()},onFocus:e=>{document.activeElement!==e.target&&e.target.focus()},tabIndex:0,className:"flex-1 bg-transparent border-none p-0 text-sm text-slate-900 focus:ring-0 focus:outline-none placeholder-slate-400",autoComplete:"off"})]}),e.jsxs("div",{className:"px-3 pb-1.5 flex items-center gap-2 min-h-[20px]",children:["email"===i&&m.length>60&&e.jsxs("div",{className:"group/warning relative flex items-center",children:[e.jsx(y,{className:"h-3 w-3 text-orange-500"}),e.jsxs("div",{className:"absolute bottom-full left-0 mb-2 hidden w-max rounded bg-slate-900 px-2 py-1 text-xs text-white shadow-lg group-hover/warning:block z-10",children:["May be truncated on mobile",e.jsx("div",{className:"absolute -bottom-1 left-1 h-2 w-2 rotate-45 bg-slate-900"})]})]}),e.jsx("span",{className:"text-[10px] "+("email"===i&&m.length>60||"push-notification"===i&&m.length>=50?"text-orange-500 font-medium":"text-slate-400"),children:"push-notification"===i?50-m.length+" characters left":120-m.length+" characters left"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5  border-slate-200 pb-3",children:[e.jsxs(I,{type:"button",variant:"secondary",size:"sm",onMouseDown:e=>{e.preventDefault();const t=r[0];t&&(b(t.macro.replace(/[{}]/g,"")),(()=>{if(g&&le.current){const e=`{{${g}}}`;le.current.focus();const t=window.getSelection();if(t&&t.rangeCount>0){const s=t.getRangeAt(0);if(le.current.contains(s.commonAncestorContainer)){s.deleteContents();const n=document.createTextNode(e);s.insertNode(n),s.setStartAfter(n),s.setEndAfter(n),t.removeAllRanges(),t.addRange(s)}else le.current.innerHTML+=e}else le.current.innerHTML+=e;p(le.current.innerHTML),b("")}})())},iconTrailing:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),children:["{ }"," Insert"]}),e.jsxs("select",{className:"rounded-md border border-slate-300 bg-white px-3 py-1.5 text-sm text-slate-700 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",defaultValue:"Inter",children:[e.jsx("option",{value:"Inter",children:"T Inter"}),e.jsx("option",{value:"Arial",children:"Arial"}),e.jsx("option",{value:"Helvetica",children:"Helvetica"}),e.jsx("option",{value:"Times",children:"Times New Roman"})]}),e.jsx("div",{className:"h-5 w-px bg-slate-300"}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"bold"),className:"h-8 w-8 p-0 "+(U?"bg-slate-200 text-slate-900":""),title:"Bold",iconLeading:e.jsx(w,{className:"h-4 w-4"})}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"italic"),className:"h-8 w-8 p-0 "+(G?"bg-slate-200 text-slate-900":""),title:"Italic",iconLeading:e.jsx(N,{className:"h-4 w-4"})}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"underline"),className:"h-8 w-8 p-0 "+(X?"bg-slate-200 text-slate-900":""),title:"Underline",iconLeading:e.jsx(C,{className:"h-4 w-4"})}),e.jsx("div",{className:"h-5 w-px bg-slate-300"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{ref:ne,type:"button",onMouseDown:e=>{if(e.preventDefault(),le.current){le.current.focus();const e=window.getSelection();if(e&&e.rangeCount>0){const t=e.getRangeAt(0);le.current.contains(t.commonAncestorContainer)&&(oe.current=t.cloneRange())}}},onClick:e=>{var t;if(e.preventDefault(),e.stopPropagation(),le.current){le.current.focus();const e=window.getSelection();if(e&&e.rangeCount>0){const t=e.getRangeAt(0);le.current.contains(t.commonAncestorContainer)&&(oe.current=t.cloneRange())}else if(!oe.current){const e=document.createRange(),n=window.getSelection();if(n&&n.anchorNode&&le.current.contains(n.anchorNode))try{const s=n.anchorNode.nodeType===Node.TEXT_NODE?n.anchorNode:le.current,a=n.anchorOffset||0,r=(null==(t=s.textContent)?void 0:t.length)||0;e.setStart(s,Math.min(a,r)),e.setEnd(s,Math.min(a,r)),oe.current=e}catch(s){e.selectNodeContents(le.current),e.collapse(!1),oe.current=e}else e.selectNodeContents(le.current),e.collapse(!1),oe.current=e}}R(!L)},className:"flex h-8 w-8 items-center justify-center rounded hover:bg-slate-100",title:"Text Color",children:e.jsx("div",{className:"h-3.5 w-3.5 rounded-full",style:{backgroundColor:F}})}),L&&e.jsxs("div",{ref:ae,className:"color-picker-popup absolute left-0 top-full z-50 mt-1 rounded-lg border border-slate-200 bg-white p-3 shadow-lg",onMouseDown:e=>{e.preventDefault()},children:[e.jsx("div",{className:"grid grid-cols-7 gap-2",children:ie[0].map((t,s)=>e.jsx("button",{type:"button",onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),ue(t,e)},onClick:e=>{e.preventDefault(),e.stopPropagation(),ue(t,e)},className:"h-8 w-8 rounded border-2 transition "+(F===t?"border-primary ring-2 ring-primary/20":"border-slate-300"),style:{backgroundColor:t},title:t},s))}),e.jsx("div",{className:"mt-2 grid grid-cols-6 gap-2",children:ie[1].map((t,s)=>e.jsx("button",{type:"button",onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),ue(t,e)},onClick:e=>{e.preventDefault(),e.stopPropagation(),ue(t,e)},className:"h-8 w-8 rounded border-2 transition "+(F===t?"border-primary ring-2 ring-primary/20":"border-slate-300"),style:{backgroundColor:t},title:t},s))}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"rounded-md border border-slate-300 bg-white px-3 py-1.5 text-xs text-slate-700 hover:bg-slate-50",children:"Custom"}),e.jsx("input",{type:"text",value:F,onChange:e=>B(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),ue(F,e))},onBlur:()=>{/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(F)&&ue(F)},className:"flex-1 rounded-md border border-slate-300 px-2 py-1.5 text-xs text-slate-700 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"#7F56D9"})]})]})]}),e.jsx("div",{className:"h-5 w-px bg-slate-300"}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"justifyLeft"),className:"h-8 w-8 p-0",title:"Align Left",iconLeading:e.jsx(S,{className:"h-4 w-4"})}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"justifyCenter"),className:"h-8 w-8 p-0",title:"Align Center",iconLeading:e.jsx(D,{className:"h-4 w-4"})}),e.jsx("div",{className:"h-5 w-px bg-slate-300"}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"insertUnorderedList"),className:"h-8 w-8 p-0",title:"Bullet List",iconLeading:e.jsx(A,{className:"h-4 w-4"})}),e.jsx("div",{className:"h-5 w-px bg-slate-300"}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>{e.preventDefault();const t=prompt("Enter URL:");t&&ce("createLink",t)},className:"h-8 w-8 p-0",title:"Insert Link",iconLeading:e.jsx(M,{className:"h-4 w-4"})}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>{e.preventDefault();const t=prompt("Enter image URL:");t&&ce("insertImage",t)},className:"h-8 w-8 p-0",title:"Insert Image",iconLeading:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"relative mt-2",children:[e.jsx("div",{ref:le,contentEditable:!0,onInput:e=>{const t=e.currentTarget.innerHTML;p(t),setTimeout(()=>de(),10)},onKeyUp:()=>{de()},onBlur:e=>{const t=e.nativeEvent.relatedTarget;t&&"subject"===t.id||de()},onFocus:()=>{de()},className:"broadcast-editor-content composer-editor w-full -mt-2 rounded-md border border-slate-300 bg-white px-4 py-3 text-sm text-slate-900 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 overflow-y-auto",style:{whiteSpace:"pre-wrap",lineHeight:"1.5"},"data-placeholder":"",suppressContentEditableWarning:!0}),z&&e.jsxs("div",{ref:re,className:"absolute z-50 flex items-center gap-1 rounded-lg border border-slate-200 bg-slate-900 p-1.5 shadow-lg",style:{top:`${O.top}px`,left:`${O.left}px`,transform:"translateX(-50%)"},onMouseDown:e=>e.preventDefault(),children:[e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"bold"),className:"h-7 w-7 p-0 bg-slate-900 text-white hover:bg-slate-700 "+(U?"bg-slate-700":""),title:"Bold",iconLeading:e.jsx(w,{className:"h-3.5 w-3.5"})}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"italic"),className:"h-7 w-7 p-0 bg-slate-900 text-white hover:bg-slate-700 "+(G?"bg-slate-700":""),title:"Italic",iconLeading:e.jsx(N,{className:"h-3.5 w-3.5"})}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"underline"),className:"h-7 w-7 p-0 bg-slate-900 text-white hover:bg-slate-700 "+(X?"bg-slate-700":""),title:"Underline",iconLeading:e.jsx(C,{className:"h-3.5 w-3.5"})}),e.jsx("div",{className:"h-5 w-px bg-slate-600"}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"justifyLeft"),className:"h-7 w-7 p-0 bg-slate-900 text-white hover:bg-slate-700",title:"Align Left",iconLeading:e.jsx(S,{className:"h-3.5 w-3.5"})}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"justifyCenter"),className:"h-7 w-7 p-0 bg-slate-900 text-white hover:bg-slate-700",title:"Align Center",iconLeading:e.jsx(D,{className:"h-3.5 w-3.5"})}),e.jsx("div",{className:"h-5 w-px bg-slate-600"}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onMouseDown:e=>xe(e,"insertUnorderedList"),className:"h-7 w-7 p-0 bg-slate-900 text-white hover:bg-slate-700",title:"Bullet List",iconLeading:e.jsx(A,{className:"h-3.5 w-3.5"})})]})]}),e.jsxs("div",{className:"mt-auto pt-6 flex justify-end gap-3 border-t border-slate-200",children:[e.jsx(I,{type:"button",variant:"secondary",size:"md",onClick:t,children:"Cancel"}),e.jsx(I,{type:"button",variant:"primary",size:"md",onClick:()=>{n({subject:m,message:x,templateType:"late-message"===c?"late-message":void 0}),f(!1)},children:"Save changes"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-slate-200 pb-2 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-slate-900",children:"push-notification"===i?"Title: ":"Subject: "}),e.jsx("span",{className:"font-medium text-slate-900",children:m})]}),"email"===i&&m.length>60&&e.jsx("div",{className:"group relative flex items-center cursor-help",children:e.jsxs("div",{className:"flex items-center gap-1 rounded bg-orange-50 px-2 py-0.5 text-xs font-medium text-orange-700 border border-orange-200",children:["May be truncated on mobile",e.jsx(y,{className:"h-3 w-3"})]})})]}),e.jsx("div",{className:"broadcast-editor-content text-slate-600",dangerouslySetInnerHTML:{__html:x}}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(I,{type:"button",variant:"primary",size:"md",onClick:()=>f(!0),children:"Edit"})})]})}):e.jsxs("div",{className:"space-y-6 h-[calc(100vh-200px)] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 pb-4",children:[e.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Recipients"}),e.jsx(I,{type:"button",variant:"secondary",size:"sm",onClick:()=>se([...te,{id:Date.now().toString(),field:"Group",operator:"is",value:""}]),iconLeading:e.jsx(E,{className:"h-4 w-4"}),children:"New filter"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-slate-700",children:[e.jsx("span",{children:"Matching"}),e.jsxs("select",{value:Z,onChange:e=>ee(e.target.value),className:"rounded-md border border-slate-300 bg-white px-2 py-1 text-sm font-medium text-slate-700 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"ANY",children:"ANY"}),e.jsx("option",{value:"ALL",children:"ALL"})]}),e.jsx("span",{children:"of the following filters"})]}),e.jsx("div",{className:"text-sm font-medium text-primary self-end sm:self-auto",children:"400/500"})]}),e.jsx("div",{className:"space-y-3",children:te.map((t,s)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 p-3 bg-slate-50 rounded-lg sm:bg-transparent sm:p-0",children:[e.jsxs("select",{value:t.field,onChange:e=>{const t=[...te];t[s].field=e.target.value,se(t)},className:"w-full sm:w-auto sm:min-w-[140px] rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"Group",children:"Group"}),e.jsx("option",{value:"Status",children:"Message Status"})]}),e.jsxs("select",{value:t.operator,onChange:e=>{const t=[...te];t[s].operator=e.target.value,se(t)},className:"w-full sm:w-[80px] rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"is",children:"is"}),e.jsx("option",{value:"is_not",children:"is not"})]}),e.jsxs("select",{value:t.value,onChange:e=>{const t=[...te];t[s].value=e.target.value,se(t)},className:"w-full sm:flex-1 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"Speakers",children:"Speakers"}),e.jsx("option",{value:"Attendees",children:"Attendees"}),e.jsx("option",{value:"Sponsors",children:"Sponsors"}),e.jsx("option",{value:"VIP",children:"VIP"})]}),e.jsx(I,{type:"button",variant:"tertiary",size:"sm",onClick:()=>{const e=te.filter(e=>e.id!==t.id);se(e)},className:"self-end sm:self-auto p-1 text-slate-400 hover:text-slate-600",iconLeading:e.jsx(T,{className:"h-4 w-4"})})]},t.id))})]})]})})]}),e.jsx(P,{isOpen:q,onClose:()=>J(!1),onSend:()=>{a&&a({subject:m,message:x}),J(!1)},subject:m,message:x}),e.jsx($,{isOpen:K,onClose:()=>Q(!1),onSchedule:e=>{Q(!1)}})]})},U=({isOpen:t,onClose:n,onConfirm:r})=>{const[o,l]=s.useState(""),[i,c]=s.useState(""),d=()=>{l(""),c(""),n()};return e.jsx(a,{isVisible:t,onClose:d,title:"Create new macro",width:480,maxWidth:400,borderRadius:16,padding:{top:24,right:24,bottom:24,left:24},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{htmlFor:"macro-name",className:"text-sm font-medium text-slate-700",children:["Macro name ",e.jsx("span",{className:"text-primary",children:"*"})]}),e.jsx("input",{id:"macro-name",type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"Enter macro name",className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{htmlFor:"data-source",className:"text-sm font-medium text-slate-700",children:["Select data source ",e.jsx("span",{className:"text-primary",children:"*"})]}),e.jsxs("select",{id:"data-source",value:i,onChange:e=>c(e.target.value),className:"w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"",disabled:!0,children:"Select source"}),e.jsx("option",{value:"attendees",children:"Attendees"}),e.jsx("option",{value:"speakers",children:"Speakers"}),e.jsx("option",{value:"sponsors",children:"Sponsors"})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 rounded-md border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-primary/20",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>{o&&i&&(r({name:o,source:i}),l(""),c(""))},disabled:!o||!i,className:"flex-1 rounded-md bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm"})]})]})})},V=({eventName:n,isDraft:a,onBackClick:c,userAvatarUrl:d,onCardClick:m,hideNavbarAndSidebar:u=!1})=>{const{eventData:x}=r(),p=(null==x?void 0:x.eventName)||n||"Highly important conference of 2025",h=void 0===a||a,f=s.useMemo(()=>{const t=l.map(e=>({id:e.id,label:e.title,icon:e.icon}));return[{id:"overview",label:"Overview",icon:e.jsx(L,{className:"h-5 w-5"})},{id:"event-website",label:"Event website",icon:e.jsx(R,{className:"h-5 w-5"})},{id:"event-hub",label:"Event Hub",icon:e.jsx(F,{className:"h-5 w-5"}),subItems:t}]},[]),[g,b]=t.useState([]),[v,j]=t.useState(!1),[y,w]=t.useState(!1),[N,C]=t.useState(!1),[S,D]=t.useState(null),[A,M]=t.useState(null),[k,E]=t.useState([]);return e.jsxs("div",{className:u?"":"min-h-screen overflow-x-hidden bg-white",children:[!u&&e.jsxs(e.Fragment,{children:[e.jsx(o,{eventName:p,isDraft:h,onBackClick:c,onSearchClick:()=>{},onNotificationClick:()=>{},onProfileClick:()=>{},userAvatarUrl:d}),e.jsx(i,{items:f,activeItemId:"communications",onItemClick:e=>{if("event-hub"===e&&c)c();else if("communications"!==e){l.some(t=>t.id===e)&&m&&m(e)}}})]}),e.jsx("div",{className:u?"":"md:pl-[250px]",children:N?e.jsx(_,{onCancel:()=>{C(!1),D(null),M(null)},onSave:e=>{if(A)b(t=>t.map(t=>t.id===A?{...t,title:e.subject}:t));else{const t=Date.now().toString(),s={id:t,title:e.subject,userGroups:[],status:"draft",type:"email"===S?"email":"notification",recipients:{sent:0,total:0}};b(e=>[...e,s]),M(t)}},onSend:e=>{if(A)b(t=>t.map(t=>t.id===A?{...t,title:e.subject,status:"sent"}:t));else{const t={id:Date.now().toString(),title:e.subject,userGroups:[],status:"sent",type:"email"===S?"email":"notification",recipients:{sent:0,total:0}};b(e=>[...e,t])}C(!1),D(null),M(null)},macros:k,templateType:"late-message",type:S||"email"}):e.jsx(H,{communications:g,macros:k,onCreateBroadcast:()=>{j(!0)},onCreateMacro:()=>{w(!0)},onEditCommunication:e=>{},onEditMacro:e=>{},onDeleteMacro:e=>{E(t=>t.filter(t=>t.id!==e))}})}),e.jsx(O,{isOpen:v,onClose:()=>j(!1),onSelect:e=>{D(e),j(!1),C(!0),M(null)}}),e.jsx(U,{isOpen:y,onClose:()=>w(!1),onConfirm:e=>{const t={id:Date.now().toString(),macro:`{{${e.name.toLowerCase()}}}`,column:e.name};E(e=>[...e,t]),w(!1)}})]})},G=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{V as C,B as S,H as a,G as b};
